# PWA (Progressive Web App)
## PWA
mozilla의 설명에 따르면 [PWA](https://developer.mozilla.org/ko/docs/Web/Progressive_web_apps/%EC%86%8C%EA%B0%9C) 이란 <br>
`웹과 네이티브 앱의 기능 모두의 이점을 갖도록 수 많은 특정 기술과 표준 패턴을 사용해 개발된 웹 앱` 이라 설명된다.<br>
PWA는 하나의 기술로 생성된 것은 아니고 특정 요구 사항을 만족하거나 기능들이 구현되었을 때 PWA로 볼 수 있다.<br>

## PWA를 사용하는 이유
2014년 모바일 사용자 수가 데스크탑 사용자 수를 넘었다. 모바일 사용자의 대부분은 웹보다 네이티브 앱에서 더 많은 시간을 보낸다.<br>
1. 홈스크린에 아이콘이 있다는 점<br>
2. 관련 푸시 알람을 보내준다는 점 때문이다.<br>

그럼에도 불구하고 네이티브앱이 아니라 웹을 사용해야하는 이유는<br>
모바일 사용자는 새로운 앱을 다운로드하기 위해 마켓에서 검색하고 다운받는 시간을 기다리는 것에 긍정적이지 않고 <br>
사용하던 앱들만 계속 사용하는 경향이 있기 때문이다.<br>
웹은 다운로드 할 필요 없이 URL만 입력하면 되기 때문에 사용자들의 접근이 편리하고 방문빈도수가 높기 때문이다.<br>

## PWA를 구분하기 위한 특징

- 프로그레시브 - 어떤 브라우저를 선택하는 상관없이 모든 사용자에게 적합<br>
- 반응형 - 데스크탑, 모바일, 태블릿 등<br>
- 연결 독립적 - ServiceWorker 사용하여 오프라인이나 느린 네트워크에서 작동<br>
- 앱과 유사 - 앱 셸 모드에서 작성되기 때문에 앱 스타일의 탐색 기능이나 다른 작용들을 사용자에게 제공가능<br>
- 최신 상태 - ServiceWorker 업데이트 프로세스(생명주기 - installing -installed -activating -activated -redundant)덕에 최신상태 유지<br>
- 안전 - HTTPS를 통해 제공되므로 스누핑차단 - 콘텐츠 변조되지 않도록 보장<br>
```
스누핑-네트워크 상에 떠도는 중요 정보를 몰래 획득하는 행위
스푸핑-해커가 악용하고자 하는 호스트의 IP 어드레스를 바꾸어서 이를 통해 해킹을 하는 것
스니핑-해킹 기법으로서 스니핑은 네트워크 상에서 자신이 아닌 다른 상대방들의 패킷 교환을 엿듣는 것
```
- 검색 가능 - 애플리케이션으로 식별되므로 검색 엔진에서 검색 가능<br>
- 재참여 가능 - 푸시 알림과 같은 기능을 통해 쉽게 재참여가 가능<br>
- 설치 가능 - 앱 스토어에서 검색,다운 할 필요 없이 사용자가 자신에게 유용하게 홈화면 유지 가능<br>
- 링크 연결 가능 - URL을 통해 공유 쉽고 설치 불필요<br>

## ServiceWorker-(서비스워커)
### ServiceWorker
브라우저가 백그라운드에서 실행하는 스크립트로 웹페이지와는 별개로 작동한다.<br>
푸시 알림 및 백그라운드 동기화 같은 기능 등을 제공한다.<br>
응답 캐시관리를 비롯하여 네트워크 요청을 가로채고 처리하는 기능이 핵심이다. <br>
오프라인 환경을 통제할 수 있는 권한을 개발자에게 부여하여 오프라인 환경을 지원할 수 있도록 해준다.<br>

### 유의사항

구글의 [서비스워커소개](https://developers.google.com/web/fundamentals/primers/service-workers?source=post_page-----2dab5d60f611----------------------&hl=ko) 참고해보자.<br>
서비스워커는 자바스크립트 워커이므로 DOM에 직접 액세스할 수 없다.<br>
- 대신 postMessage 인터페이스를 통해 전달받은 메시지에 응답하는 방식으로 제어 대상 페이지와 통신하며 필요시 DOM 조작가능<br>
프로그래밍 가능한 네트워크 프록시이며 페이지의 네트워크 요청 처리 방법을 제어할 수 있다.<br>
사용하지 않으면 종료되고 필요 시 재시작되므로 `onfetch`와 `onmessage`핸들러의 전역상태에 의존할 수 없다.<br>
- 보관했다가 재시작시 다시 사용해야하는 정보가 있으면 IndexedDB API에 대한 엑세스 권한을 가짐<br>
Promise(프라미스)를 광범위하게 사용한다.(관련 지식 필요)<br>

### 서비스워커 생명주기
서비스워커 생명주기는 웹페이지와 완전 별개이다.<br>
서비스워커를 사이트에 설치하기 위해서는 페이지에서 자바스크립트를 이용하여 등록해야한다.<br>
1. 설치 단계(Install)<br>
서비스 워커를 등록하면 브라우저가 백그라운드에서 서비스워커 설치단계를 시작한다.<br>
모든 파일이 캐시되면 서비스 워커가 설치된다.
`파일 다운로드 및 캐싱이 실패하면 서비스워커 설치가 실패하고 활성화되지 않는다.` - 재시도 가능<br>
2. 활성화 단계(Activating)<br>
오래된 캐시를 관리 할 수 있다.<br>
서비스 워커는 해당 범위 안의 모든 페이지를 제어하지만 서비스 워커를 처음으로 등록한 페이지는 다시 로드해야한다.<br>
제어 권한이 부여된 경우 메모리 절약을 위해 종료되거나 네트워크 요청 및 메세지 생성시 fetch 및 message이벤트 처리<br>
![serviceWorkerImg](https://developers.google.com/web/fundamentals/primers/service-workers/images/sw-lifecycle.png?hl=ko)
<br>

## 후기
PWA에 대한 글을 여러번 읽어보니 대략적이나마 PWA가 무엇인지 이해가 된다.<br>
웹을 공부하면서 나조차도 모바일 사용의 양이 많지만 앱에 비해 웹이 아직까지 많이 사용되는 이유가 헷갈렸는데<br>
PWA를 적용하면 앱의 단점을 보완하고 웹의 장점을 살릴 수 있어서 굉장히 좋은 개념인 것 같다.<br>
대충 개념은 이해했으니 직접 적용해보자!<br>
